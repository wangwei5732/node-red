const when = require('when');
const Promise = when.promise;
const Sequelize = require('sequelize');
const Mysequelize = class Mysequelize {
    constructor(sqlConfig) {
        this.sqlConfig = sqlConfig;
        this.sqlConfig.multipleStatements = true;
      }
}


module.exports = MysqlHandler;


// 创建数据库连接
const sequelize = new Sequelize('database_name', 'username', 'password', {
    host: 'localhost',
    dialect: 'mysql',
  });
  
  // 定义模型
  const User = sequelize.define('user', {
    id: {
      type: Sequelize.INTEGER,
      autoIncrement: true,
      primaryKey: true,
    },
    name: {
      type: Sequelize.STRING,
      allowNull: false,
    },
    email: {
      type: Sequelize.STRING,
      allowNull: false,
      unique: true,
    },
  });
  
  // 同步模型到数据库
  sequelize.sync({ force: true })
    .then(() => {
      console.log('数据库和表已初始化');
    })
    .catch((error) => {
      console.error('初始化失败:', error);
    });